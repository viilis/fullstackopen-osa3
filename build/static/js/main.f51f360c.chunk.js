(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(14),o=t.n(c),r=t(3),i=t(1),u=t(0),a=function(e){return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:e.value,onChange:e.onChange})]})},s=t(4),l=t.n(s),d="/api/persons",j={createPerson:function(e){return l.a.post(d,e).then((function(e){return[e.data,e.status]}))},getAll:function(){return l.a.get(d).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e}))}},f=function(e){var n=e.person,t=e.newPersons,c=e.setPersons,o=e.setNewMessage;return Object(u.jsxs)("div",{children:[n.name," ",n.number," ",Object(u.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&(j.deletePerson(n.id),c(t.filter((function(e){return n.id!==e.id}))),o("Deleted ".concat(n.name)),j.getAll().then((function(e){c(e)})),setTimeout((function(){o(null)}),3e3))},children:"delete"})]})},b=function(e){var n=e.newPersons,t=e.newFilter,c=e.removePerson,o=e.notification;return Object(u.jsx)("div",{children:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(u.jsx)(f,{person:e,newPersons:n,setPersons:c,setNewMessage:o},e.name)}))})},h=function(e){var n=e.message;return null!=n?Object(u.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):null},m=function(e){var n=e.message;return null!=n?Object(u.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):null},O=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)(""),s=Object(r.a)(o,2),l=s[0],d=s[1],f=Object(i.useState)(""),O=Object(r.a)(f,2),g=O[0],p=O[1],v=Object(i.useState)(""),x=Object(r.a)(v,2),w=x[0],P=x[1],S=Object(i.useState)(null),y=Object(r.a)(S,2),A=y[0],C=y[1],k=Object(i.useState)(null),T=Object(r.a)(k,2),B=T[0],D=T[1];Object(i.useEffect)((function(){j.getAll().then((function(e){c(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(h,{message:A}),Object(u.jsx)(m,{message:B}),Object(u.jsx)(a,{value:w,onChange:function(e){P(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:l,number:g};if(t.map((function(e){return e.name})).find((function(e){return e===n.name}))){if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var o=t.find((function(e){return e.name===n.name})).id;j.update(o,n).then((function(e){d(""),p(""),C("Replaced ".concat(n.name,"'s number")),j.getAll().then((function(e){c(e)})),setTimeout((function(){C(null)}),3e3)})).catch((function(e){D("".concat(e.response.data.error)),j.getAll().then((function(e){c(e)})),setTimeout((function(){D(null)}),3e3)}))}}else j.createPerson(n).then((function(e){200===e[1]&&void 0!==e[0]&&(c(t.concat(n)),d(""),p(""),C("Added ".concat(n.name)),j.getAll().then((function(e){c(e)})),setTimeout((function(){C(null)}),3e3))})).catch((function(e){D("".concat(e.response.data.error)),j.getAll().then((function(e){c(e)})),setTimeout((function(){D(null)}),3e3)}))},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:g,onChange:function(e){p(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(b,{newPersons:t,newFilter:w,removePerson:c,notification:C})]})};o.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f51f360c.chunk.js.map