(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),o=t(3),a=t(1),i=t(0),u=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.value,onChange:e.onChange})]})},s=t(4),l=t.n(s),d="/api/persons",j={createPerson:function(e){return l.a.post(d,e).then((function(e){return e.data}))},getAll:function(){return l.a.get(d).then((function(e){return e.data}))},update:function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){l.a.delete("".concat(d,"/").concat(e))}},b=function(e){var n=e.person,t=e.newPersons,c=e.setPersons,r=e.setNewMessage;return Object(i.jsxs)("div",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&(j.deletePerson(n.id),c(t.filter((function(e){return n.id!==e.id}))),r("Deleted ".concat(n.name)),setTimeout((function(){r(null)}),3e3))},children:"delete"})]})},f=function(e){var n=e.newPersons,t=e.newFilter,c=e.removePerson,r=e.notification;return Object(i.jsx)("div",{children:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(i.jsx)(b,{person:e,newPersons:n,setPersons:c,setNewMessage:r},e.name)}))})},m=function(e){var n=e.message;return null!=n?Object(i.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):null},h=function(e){var n=e.message;return null!=n?Object(i.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):null},O=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),s=Object(o.a)(r,2),l=s[0],d=s[1],b=Object(a.useState)(""),O=Object(o.a)(b,2),g=O[0],p=O[1],v=Object(a.useState)(""),x=Object(o.a)(v,2),w=x[0],P=x[1],S=Object(a.useState)(null),y=Object(o.a)(S,2),C=y[0],k=y[1],A=Object(a.useState)(null),T=Object(o.a)(A,2),B=T[0],D=T[1];Object(a.useEffect)((function(){j.getAll().then((function(e){c(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(m,{message:C}),Object(i.jsx)(h,{message:B}),Object(i.jsx)(u,{value:w,onChange:function(e){P(e.target.value)}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:l,number:g};if(t.map((function(e){return e.name})).find((function(e){return e===n.name}))){if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var r=t.find((function(e){return e.name===n.name})).id;j.update(r,n).then((function(e){d(""),p(""),k("Replaced ".concat(n.name,"'s number")),setTimeout((function(){k(null)}),3e3)})).catch((function(e){D("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){D(null)}),3e3)})),j.getAll().then((function(e){c(e)}))}}else j.createPerson(n),c(t.concat(n)),d(""),p(""),k("Added ".concat(n.name)),setTimeout((function(){k(null)}),3e3),j.getAll().then((function(e){c(e)}))},children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:g,onChange:function(e){p(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(f,{newPersons:t,newFilter:w,removePerson:c,notification:k})]})};r.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.bc833e29.chunk.js.map